!function(e,t){var r=e.module("layoutForsecondDemand");r.controller("layoutForFixListController",["$scope","$http","$window",function(e,t,r,a){var i=function(){e.warningInfoData="",e.resType="anzhuang",t.post("/resource/queryInstalls",{text:e.text,page:e.bigCurrentPage,limit:e.itemsPerPage,order:e.order,region:e.region}).success(function(t){"请输入更详细的查询条件"==t?(e.bigCurrentPage=1,swal("请输入更详细的查询条件")):"查询为空"!==t?(e.dataList=t.docs,e.bigTotalItems=t.pageInfo.totalItems):(e.dataList=[],e.bigTotalItems=0,e.warningInfoData="暂无数据")})},n="";e.changeFixOrder=function(t){var r={};n==t?(r[t]=-1,n=""):(r[t]=1,n=t),e.order=r,i()},e.$watch("regionData",function(){e.refreshFixList()}),e.count=0,e.refreshFixList=function(){if(e.region={},e.count>=1){if(e.regionData&&""!=e.regionData){var t=e.regionData.split("/");e.region.province=t[0],e.region.city=t[1],e.region.district=t[2]}i()}e.count++},e.pageFixChanged=function(e){i()},e.shownum=34,e.viewNum=function(r,a){t.post("/resource/incInstallPageview",{resId:r._id}).success(function(e){}),r.pageview=r.pageview+1,e.showid=a,e.shownum=a},e.clearAway=function(){e.showid=999,e.shownum=34},e.maxSize=5,e.itemsPerPage=15,e.bigCurrentPage=1,e.text="",e.order={refreshedAt:-1},e.region={};var o=r.location.search;o&&""!=o&&o.length>0&&(e.text=unescape(r.location.search.split("=")[1])),i()}]),r.controller("resourceListMakeController",["$scope","$http","$window",function(e,t,r){var a=function(){e.warningInfoData="";t.post("/searchResFilter",{resType:e.resType,text:e.text,page:e.bigCurrentPage,limit:e.itemsPerPage,freightType:e.freightType,brand:e.brand,order:e.order,region:e.region,types:e.types,priceFrom:e.priceFrom,priceTo:e.priceTo,installType:e.installType}).success(function(t){"请输入更详细的查询条件"==t?(e.bigCurrentPage=1,swal("请输入更详细的查询条件")):"查询为空"!==t?(e.dataList=t.docs,e.bigTotalItems=t.pageInfo.totalItems,e.isChange=new Date):(e.dataList=[],e.bigTotalItems=0,e.warningInfoData="暂无数据")})};e.postData=a;var i="";e.changeOrder=function(t){var r={};i==t?(r[t]=-1,i=""):(r[t]=1,i=t),e.order=r,a()},e.$watch("currentCateListData+classifyData+priceData+regionData+freightTypeData+installTypeData+maxnum+minnum",function(){e.refreshList()}),e.count=0,e.refreshList=function(){if(e.region={},e.freightType="",e.installType="",e.priceFrom=0,e.priceTo=0,e.count>=1){if(e.currentCateListData&&""!=e.currentCateListData&&(e.types=[],e.types=e.currentCateListData.split("、").slice(0,e.currentCateListData.split("、").length-1)),"低于1000元、"==e.priceData?(e.priceFrom=1,e.priceTo=1e3):"1000--5000元、"==e.priceData?(e.priceFrom=1e3,e.priceTo=5e3):"5000--1万元、"==e.priceData?(e.priceFrom=5e3,e.priceTo=1e4):"1万--5万元、"==e.priceData?(e.priceFrom=1e4,e.priceTo=5e4):"5万元以上、"==e.priceData?(e.priceFrom=5e4,e.priceTo=5e10):"自定义"==e.priceData?(e.priceFrom=e.minnum,e.priceTo=e.maxnum):(e.priceFrom=0,e.priceTo=0),e.regionData&&""!=e.regionData){var t=e.regionData.split("/");e.region.province=t[0],e.region.city=t[1],e.region.district=t[2]}e.freightTypeData&&""!=e.freightTypeData&&(e.freightType=e.freightTypeData.substring(0,e.freightTypeData.length-1)),e.installTypeData&&""!=e.installTypeData&&(e.installType=e.installTypeData.substring(0,e.installTypeData.length-1)),a()}e.count++},e.showid=999,e.showModal=function(t,r){e.showid=t},e.hiddenModal=function(){e.showid=999},e.pageChanged=function(e){a()},e.maxSize=5,e.itemsPerPage=15,e.bigCurrentPage=1,e.text="",e.freightType="",e.order={refreshedAt:-1},e.priceFrom=0,e.priceTo=0,e.region={},e.resType="Manufacture",e.installType="";var n=r.location.search;n&&""!=n&&n.length>0&&(e.text=unescape(r.location.search.split("=")[1]))}]),r.controller("resourceListAllController",["$scope","$http","$window",function(e,t,r){var a=function(){e.warningInfoData="",e.resType="all",t.post("/searchResFilter",{resType:"all"==e.resType?"":e.resType,text:e.text,page:e.bigCurrentPage,limit:e.itemsPerPage,freightType:e.freightType,brand:e.brand,order:e.order,region:e.region,types:e.types,priceFrom:e.priceFrom,priceTo:e.priceTo,installType:e.installType}).success(function(t){"请输入更详细的查询条件"==t?(e.bigCurrentPage=1,swal("请输入更详细的查询条件")):"查询为空"!==t?(e.dataList=t.docs,e.bigTotalItems=t.pageInfo.totalItems,e.isChange=new Date):(e.dataList=[],e.bigTotalItems=0,e.warningInfoData="暂无数据")})};e.postData=a;var i="";e.changeOrder=function(t){var r={};i==t?(r[t]=-1,i=""):(r[t]=1,i=t),e.order=r,a()},e.$watch("currentCateListData+classifyData+priceData+regionData+freightTypeData+installTypeData+maxnum+minnum",function(){e.refreshList()}),e.count=0,e.refreshList=function(){if(e.region={},e.freightType="",e.installType="",e.priceFrom=0,e.priceTo=0,e.count>=1){if(e.currentCateListData&&""!=e.currentCateListData&&(e.types=[],e.types=e.currentCateListData.split("、").slice(0,e.currentCateListData.split("、").length-1)),"低于1000元、"==e.priceData?(e.priceFrom=1,e.priceTo=1e3):"1000--5000元、"==e.priceData?(e.priceFrom=1e3,e.priceTo=5e3):"5000--1万元、"==e.priceData?(e.priceFrom=5e3,e.priceTo=1e4):"1万--5万元、"==e.priceData?(e.priceFrom=1e4,e.priceTo=5e4):"5万元以上、"==e.priceData?(e.priceFrom=5e4,e.priceTo=5e10):"自定义"==e.priceData?(e.priceFrom=e.minnum,e.priceTo=e.maxnum):(e.priceFrom=0,e.priceTo=0),e.regionData&&""!=e.regionData){var t=e.regionData.split("/");e.region.province=t[0],e.region.city=t[1],e.region.district=t[2]}e.freightTypeData&&""!=e.freightTypeData&&(e.freightType=e.freightTypeData.substring(0,e.freightTypeData.length-1)),e.installTypeData&&""!=e.installTypeData&&(e.installType=e.installTypeData.substring(0,e.installTypeData.length-1)),a()}e.count++},e.showid=999,e.showModal=function(t,r){e.showid=t},e.hiddenModal=function(){e.showid=999},e.pageChanged=function(e){a()},e.maxSize=5,e.itemsPerPage=15,e.bigCurrentPage=1,e.text="",e.freightType="",e.order={refreshedAt:-1},e.priceFrom=0,e.priceTo=0,e.region={},e.resType="Manufacture",e.installType="";var n=r.location.search;n&&""!=n&&n.length>0&&(e.text=unescape(r.location.search.split("=")[1]))}]),r.controller("resourceListMaterialController",["$scope","$http","$window",function(e,t,r){e.resType="Material";var a=function(){e.warningInfoData="",t.post("/searchResFilter",{resType:e.resType,text:e.text,page:e.bigCurrentPage,limit:e.itemsPerPage,freightType:e.freightType,brand:e.brand,order:e.order,region:e.region,types:e.types,priceFrom:e.priceFrom,priceTo:e.priceTo}).success(function(t){"请输入更详细的查询条件"==t?(e.bigCurrentPage=1,swal("请输入更详细的查询条件")):"查询为空"!==t?(e.dataList=t.docs,e.bigTotalItems=t.pageInfo.totalItems):(e.dataList=[],e.bigTotalItems=0,e.warningInfoData="暂无数据")})};e.postData=a;var i="";e.changeOrder=function(t){var r={};i==t?(r[t]=-1,i=""):(r[t]=1,i=t),e.order=r,a()},e.$watch("currentCateListData+classifyData+priceData+regionData+freightTypeData+maxnum+minnum",function(){e.refreshList()}),e.count=0,e.refreshList=function(){if(e.brand=[],e.region={},e.freightType="",e.priceFrom=0,e.priceTo=0,e.count>=1){if(e.currentCateListData&&""!=e.currentCateListData&&(e.types=[],e.types=e.currentCateListData.split("、").slice(0,e.currentCateListData.split("、").length-1)),e.classifyData&&""!=e.classifyData&&(e.brand=e.classifyData.split("、").slice(0,e.classifyData.split("、").length-1)),"低于1000元、"==e.priceData?(e.priceFrom=1,e.priceTo=1e3):"1000--5000元、"==e.priceData?(e.priceFrom=1e3,e.priceTo=5e3):"5000--1万元、"==e.priceData?(e.priceFrom=5e3,e.priceTo=1e4):"1万--5万元、"==e.priceData?(e.priceFrom=1e4,e.priceTo=5e4):"5万元以上、"==e.priceData?(e.priceFrom=5e4,e.priceTo=5e10):"自定义"==e.priceData?(e.priceFrom=e.minnum,e.priceTo=e.maxnum):(e.priceFrom=0,e.priceTo=0),e.regionData&&""!=e.regionData){var t=e.regionData.split("/");e.region.province=t[0],e.region.city=t[1],e.region.district=t[2]}e.freightTypeData&&""!=e.freightTypeData&&(e.freightType=e.freightTypeData.substring(0,e.freightTypeData.length-1)),a()}e.count++},e.showid=999,e.showModal=function(t,r){e.showid=t},e.hiddenModal=function(){e.showid=999},e.pageChanged=function(e){a()},e.maxSize=5,e.itemsPerPage=15,e.bigCurrentPage=1,e.text="",e.freightType="",e.brand=[],e.order={refreshedAt:-1},e.priceFrom=0,e.priceTo=0,e.region={},e.types=[];var n=r.location.search;n&&""!=n&&n.length>0&&(e.text=unescape(r.location.search.split("=")[1]))}]),r.controller("resourceListMachineController",["$scope","$http","$window",function(e,t,r){e.resType="Equipment";var a=function(){e.warningInfoData="";t.post("/searchResFilter",{resType:e.resType,text:e.text,page:e.bigCurrentPage,limit:e.itemsPerPage,freightType:e.freightType,brand:e.brand,order:e.order,region:e.region,types:e.types,priceFrom:e.priceFrom,priceTo:e.priceTo,installType:e.installType}).success(function(t){"请输入更详细的查询条件"==t?(e.bigCurrentPage=1,swal("请输入更详细的查询条件")):"查询为空"!==t?(e.dataList=t.docs,e.bigTotalItems=t.pageInfo.totalItems):(e.dataList=[],e.bigTotalItems=0,e.warningInfoData="暂无数据")})};e.postData=a;var i="";e.changeOrder=function(t){var r={};i==t?(r[t]=-1,i=""):(r[t]=1,i=t),e.order=r,a()},e.$watch("currentCateListData+classifyData+priceData+regionData+freightTypeData+installTypeData+maxnum+minnum",function(){e.refreshList()}),e.count=0,e.refreshList=function(){if(e.brand=[],e.region={},e.freightType="",e.installType="",e.priceFrom=0,e.priceTo=0,e.count>=1){if(e.currentCateListData&&""!=e.currentCateListData&&(e.types=[],e.types=e.currentCateListData.split("、").slice(0,e.currentCateListData.split("、").length-1)),e.classifyData&&""!=e.classifyData&&(e.brand=e.classifyData.split("、").slice(0,e.classifyData.split("、").length-1)),"低于1000元、"==e.priceData?(e.priceFrom=1,e.priceTo=1e3):"1000--5000元、"==e.priceData?(e.priceFrom=1e3,e.priceTo=5e3):"5000--1万元、"==e.priceData?(e.priceFrom=5e3,e.priceTo=1e4):"1万--5万元、"==e.priceData?(e.priceFrom=1e4,e.priceTo=5e4):"5万元以上、"==e.priceData?(e.priceFrom=5e4,e.priceTo=5e10):"自定义"==e.priceData?(e.priceFrom=e.minnum,e.priceTo=e.maxnum):(e.priceFrom=0,e.priceTo=0),e.regionData&&""!=e.regionData){var t=e.regionData.split("/");e.region.province=t[0],e.region.city=t[1],e.region.district=t[2]}e.freightTypeData&&""!=e.freightTypeData&&(e.freightType=e.freightTypeData.substring(0,e.freightTypeData.length-1)),e.installTypeData&&""!=e.installTypeData&&(e.installType=e.installTypeData.substring(0,e.installTypeData.length-1)),a()}e.count++},e.showid=999,e.showModal=function(t,r){e.showid=t},e.hiddenModal=function(){e.showid=999},e.pageChanged=function(e){a()},e.maxSize=5,e.itemsPerPage=15,e.bigCurrentPage=1,e.text="",e.freightType="",e.brand=[],e.order={refreshedAt:-1},e.priceFrom=0,e.priceTo=0,e.region={},e.types=[],e.installType="";var n=r.location.search;n&&""!=n&&n.length>0&&(e.text=unescape(r.location.search.split("=")[1]))}]),r.controller("secondDemandController",["$scope","$http","$window",function(e,t,r){var a=function(){e.warningInfoData="",e.resType="xuqiu",t.post("/searchDemandsFilter",{text:e.text,page:e.bigCurrentPage,limit:e.itemsPerPage,order:e.order,region:e.region,types:e.types,priceFrom:e.priceFrom,priceTo:e.priceTo,classify:e.classify}).success(function(t){"请输入更详细的查询条件"==t?(e.bigCurrentPage=1,swal("请输入更详细的查询条件")):"查询为空"!==t?(e.dataList=t.docs,e.bigTotalItems=t.pageInfo.totalItems):(e.dataList=[],e.bigTotalItems=0,e.warningInfoData="暂无数据")})},i="";e.changeOrder=function(t){var r={};i==t?(r[t]=-1,i=""):(r[t]=1,i=t),e.order=r,a()},e.$watch("typesData+classifyData+priceData+regionData+maxnum+minnum",function(){e.refreshList()}),e.count=0,e.refreshList=function(){if(e.classify=[],e.region={},e.count>=1){if(e.currentCateListData&&""!=e.currentCateListData&&(e.types=[],e.types=e.currentCateListData.split("、").slice(0,e.currentCateListData.split("、").length-1)),""==e.currentCateListData&&(e.types=[]),e.classifyData&&""!=e.classifyData&&(e.classify=e.classifyData.split("、").slice(0,e.classifyData.split("、").length-1)),"低于1000元、"==e.priceData?(e.priceFrom=0,e.priceTo=1e3):"1000--5000元、"==e.priceData?(e.priceFrom=1e3,e.priceTo=5e3):"5000--1万元、"==e.priceData?(e.priceFrom=5e3,e.priceTo=1e4):"1万--5万元、"==e.priceData?(e.priceFrom=1e4,e.priceTo=5e4):"5万元以上、"==e.priceData?(e.priceFrom=5e4,e.priceTo=5e10):"自定义"==e.priceData?(e.priceFrom=e.minnum,e.priceTo=e.maxnum):(e.priceFrom=0,e.priceTo=0),e.regionData&&""!=e.regionData){var t=e.regionData.split("/");e.region.province=t[0],e.region.city=t[1],e.region.district=t[2]}a()}e.count++},e.showid=999,e.showModal=function(t,r){e.showid=t},e.hiddenModal=function(){e.showid=999},e.pageChanged=function(e){a()},e.maxSize=5,e.itemsPerPage=18,e.bigCurrentPage=1,e.text="",e.order={refreshedAt:-1},e.priceFrom=0,e.priceTo=0,e.region={},e.types=[],e.classify="";var n=r.location.search;n&&""!=n&&n.length>0&&(e.text=unescape(r.location.search.split("=")[1])),a()}]),r.controller("tenderListController",["$scope","$http","$window",function(e,t,r){var a=function(){e.warningInfoData="",e.resType="zhaobiao",t.post("/searchTenderFilter",{text:e.text,region:e.region,types:e.types,tenderType:e.tenderType,status:e.status,order:e.order}).success(function(t){"请输入更详细的查询条件"==t?(e.bigCurrentPage=1,swal("请输入更详细的查询条件")):"查询为空"!==t?(e.dataList=t.docs,e.bigTotalItems=t.pageInfo.totalItems,e.isChange=new Date):(e.dataList=[],e.bigTotalItems=0,e.warningInfoData="暂无数据")})};e.postData=a;var i="";e.changeOrder=function(t){var r={};i==t?(r[t]=-1,i=""):(r[t]=1,i=t),e.order=r,a()},e.$watch("currentCateListData+tenderTypeData+statusData+regionData",function(){e.refreshList()}),e.alertForLogin=function(){swal({title:"您还未登录，无法查看招标详情",text:"",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"去登陆",closeOnConfirm:!1},function(e){e&&r.open("/users/login")})},e.count=0,e.refreshList=function(){if(e.region={},e.tenderType="",e.status="",e.count>=1){if(e.currentCateListData&&""!=e.currentCateListData&&(e.types=[],e.types=e.currentCateListData.split("、").slice(0,e.currentCateListData.split("、").length-1)),e.regionData&&""!=e.regionData){var t=e.regionData.split("/");e.region.province=t[0],e.region.city=t[1],e.region.district=t[2]}e.tenderTypeData&&""!=e.tenderTypeData&&(e.tenderType=e.tenderTypeData.substring(0,e.tenderTypeData.length-1),"公开招标"==e.tenderType?e.tenderType=1:"邀请招标"==e.tenderType?e.tenderType=2:e.tenderType=""),e.statusData&&""!=e.statusData&&(e.status=e.statusData.substring(0,e.statusData.length-1),"投标中"==e.status?e.status=2:e.status=""),a()}e.count++},e.pageChanged=function(e){a()},e.maxSize=5,e.itemsPerPage=15,e.bigCurrentPage=1,e.text="",e.status="",e.order={createdAt:-1},e.region={},e.tenderType="",e.types=[];var n=r.location.search;n&&""!=n&&n.length>0&&(e.text=unescape(r.location.search.split("=")[1]))}]),r.filter("trusted",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),r.filter("contentFilter",function(){return function(e){return e=e.replace(/<\/?[^>]*>/g,""),e=e.replace(/[ | ]*\n/g,"\n"),e=e.replace(/&nbsp;/gi,"")}}),r.filter("toZero",function(){return function(e){return null==e||0==e?"面议":e+"元"}}),r.filter("itemToId",function(){return function(e){return e._id}}),r.filter("itemToName",function(){return function(e){return e.user&&/^[\u3220-\uFA29]+$/.test(e.user.company.companyName)?e.user.company.companyName:e.contacts}}),r.filter("endToTime",function(){return function(e){if(moment(e).isBefore(new Date))return"投标已截止";var t="",r=(moment(e).toDate().getTime()-(new Date).getTime())/1e3,a=parseInt(r/24/3600),i=parseInt(r%86400/3600),n=parseInt(r%3600/60);return a>0&&(t+=a+"天"),i>0&&(t+=i+"小时"),n>0&&(t+=n+"分钟"),t+"后截止"}}),r.filter("fixdetails",function(){return function(e){return e.length>50?e.substring(0,50)+"……":e}}),r.filter("fixtitle",function(){return function(e){return e.length>30?e.substring(0,30)+"……":e}}),r.filter("fixcontentFilter",function(){return function(e){if(e)for(var t=0;t<e.length;t++)e[t].details.length>50?e[t].j=!0:e[t].j=!1;return e}})}(angular,jQuery);