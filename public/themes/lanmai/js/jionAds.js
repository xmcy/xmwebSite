function settime(){var r=$(".sendCode");if(0==countdown)return r.css("background","#57B879"),r.removeAttr("disabled"),r.val("发送验证码"),void(countdown=60);r.css("background","#9e9e9e"),r.attr("disabled","disabled"),countdown--,r.val(countdown+"s后"),setTimeout(function(){settime()},1e3)}$(function(){$(".myTelNum").on("input",function(){var r=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,e=$(".myTelNum").val().match(r);if(e)$("#username_wright-error").html("手机号码格式正确！").css({color:"#57B879"}),$(".sendCodeRegister").css({background:"#57B879"}).removeAttr("disabled");else if(!e)return $("#username_wright-error").html("手机号码不正确！").css({color:"#DA2F2F"}),void $(".sendCodeRegister").css({background:"#9E9E9E"}).attr({disabled:"disabled"})}),$(".forRegister>a").click(function(){var r=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,e=$(".myTelNum").val(),o=e.match(r),s=$(".codeValue").val(),t=$(".keepPassword").val(),c=$(".inviteCode").val();if(""!=e)if(o)if(o&&$("#username_wright-error").html("手机号码格式正确！").css({color:"#57B879"}),""!=s){var l=/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/,i=/^[a-zA-Z0-9_]+$/,n=$(".honeyUName").val(),a=i.test(t),d=l.test(n);if(""==n)$("#honey_wright-error").html("");else{if(!d)return void $("#honey_wright-error").html("昵称不能包含特殊字符！").css({color:"#DA2F2F"});if(n.length>6)return void $("#honey_wright-error").html("昵称不能超过6个字符！").css({color:"#DA2F2F"});d&&$("#honey_wright-error").html("昵称格式正确！").css({color:"#57B879"})}""!=t?a?t.length<6||t.length>12?$("#pas_wright-error").html("请输入6-12位密码！").css({color:"#DA2F2F"}):(t.length>=6&&t.length<=12&&$("#pas_wright-error").html("密码格式正确！").css({color:"#57B879"}),$.post("/users/doRegWithPhoneNum",{phoneNum:e,code:s,password:t,inviteCode:c},function(r){"success"==r.result?($("#pas_wright-error").html("注册成功！").css({color:"#57B879"}),swal("注册成功！","","success"),setTimeout(function(){window.location.href="weRegister"},3e3)):swal(r+"！","","error")})):$("#pas_wright-error").html("密码只能包含数字、字母、下划线！").css({color:"#DA2F2F"}):$("#pas_wright-error").html("密码不能为空！").css({color:"#DA2F2F"})}else $("#code_wright-error").html("验证码不能为空！").css({color:"#DA2F2F"});else $("#username_wright-error").html("手机号码不正确！").css({color:"#DA2F2F"});else $("#username_wright-error").html("请输入手机号码").css({color:"#DA2F2F"})}),$(".sendCodeRegister").click(function(){var r=$(".myTelNum").val();$.ajax({type:"POST",url:"/users/sendVerifyCodeByPhoneRegister",data:{phoneNum:r,postType:"reg"},dataType:"json",success:function(r){if("success"==r.result)$("#code_wright-error").html("验证码已发送，请填入！").css({color:"#57B879"}),settime();else if("发送验证码失败"==r.msg.msg)$("#code_wright-error").html("发送验证码频繁，请稍后再试！").css({color:"#DA2F2F"});else if(r.msg="手机号码已被注册")return void $("#username_wright-error").html("手机号码已注册！请前往登录！").css({color:"#DA2F2F"})}})}),$(".forLoginSubmit").on("click",function(){var r=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,e=$(".loginNum").val(),o=e.match(r);if(""!=e)if(o){o&&$("#loginName_wright-error").html("手机号码格式正确！").css({color:"#57B879"});var s=$(".loginPasswordVal").val();""!=s?$.post("/users/doLogin",{userName:e,password:s},function(r){if("success"!=r)return $("#loginPas_wright-error").html(r).css({color:"#DA2F2F"}),void swal(r,"","error");$("#loginPas_wright-error").html("登录成功！").css({color:"#57B879"}),swal("登录成功！","","success"),setTimeout(function(){window.location.href="getHomeInfo"},3e3)}):$("#loginPas_wright-error").html("密码不能为空！").css({color:"#DA2F2F"})}else $("#loginName_wright-error").html("手机号码不正确！").css({color:"#DA2F2F"});else $("#loginName_wright-error").html("请输入手机号码").css({color:"#DA2F2F"})}),$(".forgetUsername").on("input",function(){var r=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,e=$(".forgetUsername").val().match(r);if(e)$("#forgetUserName_wright-error").html("手机号码格式正确！").css({color:"#57B879"}),$(".sendCode").css({background:"#57B879"}).removeAttr("disabled");else if(!e)return $("#forgetUserName_wright-error").html("手机号码格式不正确！").css({color:"#DA2F2F"}),void $(".sendCode").css({background:"#9E9E9E"}).attr({disabled:"disabled"})}),$(".forgetCode01").blur(function(){var r=$(".forgetCode01").val(),e=$(".forgetUsername").val();""!=e?""!=r?$.post("/users/checkVerifyCode",{code:r,phoneNum:e},function(r){if("success"==r)$("#forgetCode_wright-error").html("验证码正确！").css({color:"#57B879"}),$(".forgetCode01").attr({disabled:"disabled"});else{if("验证码错误"==r)return void $("#forgetCode_wright-error").html("验证码错误!").css({color:"#DA2F2F"});if("验证码已过期"==r)return void $("#forgetCode_wright-error").html("验证码已过期!").css({color:"#DA2F2F"});if("电话号码或验证码无效"==r)return void $("#forgetCode_wright-error").html("电话号码或验证码无效!").css({color:"#DA2F2F"})}}):$("#forgetCode_wright-error").html("验证码不能为空！").css({color:"#DA2F2F"}):$("#forgetUserName_wright-error").html("请输入手机号码").css({color:"#DA2F2F"})}),$(".forGetBack>a").click(function(){var r=$(".forgetUsername").val(),e=$(".forgetPassword").val(),o=/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$/,s=r.match(o);""!=r?s?(s&&($("#forgetUserName_wright-error").html("手机号码格式正确！").css({color:"#57B879"}),$(".sendCode").css({background:"#57B879"})),""!=e?(codeId=$(".storeMyNmeD").val(),$.post("/users/resetPsdFromForgetByWchat",{id:codeId,password:e},function(r){if("success"!=r)return $("#forgetPas_wright-error").html("密码格式不正确！").css({color:"#DA2F2F"}),void swal(r+"！","","error");$("#forgetPas_wright-error").html("密码重置成功！").css({color:"#57B879"}),swal("重置成功！","","success"),setTimeout(function(){window.location.href="weRegister"},3e3)})):$("#forgetPas_wright-error").html("密码不能为空！").css({color:"#DA2F2F"})):$("#forgetUserName_wright-error").html("手机号码格式不正确！").css({color:"#DA2F2F"}):$("#forgetUserName_wright-error").html("请输入手机号码").css({color:"#DA2F2F"})}),$(".forgetPasSendCode").click(function(){var r=$(".forgetUsername").val();$.ajax({type:"POST",url:"/users/sendVerifyCodeByPhone",data:{phoneNum:r},dataType:"json",success:function(r){if("success"==r.result)$("#forgetCode_wright-error").html("验证码已发送，请填入！").css({color:"#57B879"}),$(".storeMyNmeD").val(r.user),settime();else if("发送验证码失败"==r.msg.msg)$("#forgetUserName_wright-error").html("发送验证码频繁，请稍后再试！").css({color:"#DA2F2F"});else if(r.msg="手机号码未注册")return $("#forgetUserName_wright-error").html("手机号码未注册！请前往注册！").css({color:"#DA2F2F"}),void setTimeout(function(){window.location.href="weRegister"},3e3)}})})});var countdown=60;